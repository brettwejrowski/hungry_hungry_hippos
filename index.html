<!doctype html>
<html>
	<head>
		<title>JS1k, 1k demo submission [ID]</title>
		<meta charset="utf-8" />
	</head>
	<body>
		<canvas id="c"></canvas>
		<script>
			var b = document.body;
			var c = document.getElementsByTagName('canvas')[0];
			var a = c.getContext('2d');
			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218
		</script>
		<script>
// start of submission //
c.width=c.height=W=510;
a.font = "5ex y";
var ballsize = 20,
	outerCircle = 250,
	innerCircle=40,
	center = 255,
	court = 500,
	
	iterator =T=10,
	
	moving_distance,
	B = [],
	iB,
	white = "#fff",
	black = "#000",
	
	// hippo
	H = [ 0 // x
		, -1 // y
		, center-center*0 // xPos -- replace with x in iter
		, center-center*-1 // yPos -- replace with y in iter
		, 0 // dir
		, 0 // dist
		, 0 // score
		, "#02d"// color
	],
	
	_math = Math,
	_pi2 = _math.PI*2,
	_rand = _math.random,
	_sqrt = _math.sqrt,
	_abs = _math.abs,
	_fill = "fill",
	_Style = "Style",
	_stroke = "stroke",
	_Path = "Path",
	_fillStyle = _fill+_Style,
	_fillRect = _fill+"Rect",
	_strokeStyle = _stroke+_Style,
	_beginPath = "begin"+_Path,
	_arc = "arc",
	_closePath = "close"+_Path,
	
	b_dist,
	b_acc,
	
	
	onkeydown = onkeyup = function(i){
		i.which == 32 ? H[4]= ( i.type[5] ? 1:-1 )  :0; 
	}
	
	A = function(x,y,r){
		D( _beginPath )
			( _arc , x ,y , r ,0,_pi2,true )
			( _closePath )
			( _fill );
		return A;
	};

	
	while(iterator-->-1){
		B.push({
			  x:60+ _rand()*400
			, y:60+ _rand()*400
			, X:0
			, Y:0
		});
	}
	
	
	D = function(J,K,L,M,N,O,P){a[J](K,L,M,N,O,P);return D};
	
	

	
	


function drawCourt(){
	// background
	a[_fillStyle]="#900";
	A( center , center , W*2)

	a[_fillStyle]="#f00";
	// circle 
	A( center , center , outerCircle )
	
		
	// redraw balls
	while(iB=B[++iterator]){
		
		// if the ball is still active
		if(iB!=1){
			
			// move the ball
			b_dist = distanceFromCenter( iB.x , iB.y , center );
			b_acc = acceleration( b_dist );
			iB.x+=iB.X+= .5*b_acc*( iB.x>center ? 1 : -1);
			iB.y+=iB.Y+= .5*b_acc*( iB.y>center ? 1 : -1);

			// draw the ball
			a[_fillStyle] = white,
			A( iB.x,iB.y,ballsize);
		}
	}
	
	// draw the hippo
	H=drawHippo.apply(c,H);
	
}	

function drawHippo(x,y,xPos,yPos,dir,dist,score,color){
	// redraw the hippo!
	moving_distance = dist*8;

	a[_fillStyle]=color;
	//body
	A( xPos, yPos+y*(75+moving_distance) , 35 )
		( xPos , yPos+y*(30+moving_distance) , 55 );
	

	// score
	a.fillText( score , xPos-100, yPos-50 );
	a[_fillStyle]=color.replace("d","9");
	
	D( _fillRect , xPos-40,yPos+y*(ballsize+moving_distance),ballsize,T)
	 ( _fillRect , xPos+ballsize,yPos+y*(ballsize+moving_distance),ballsize,T);
		
	// nose
		A(  xPos-T ,yPos+y*(91+moving_distance) , 5 )
			( xPos+T ,yPos+y*(91+moving_distance) , 5 )
			( xPos-ballsize ,yPos+y*(50+moving_distance) , T )
			( xPos+ballsize ,yPos+y*(50+moving_distance) , T  );
		
		
	dist+=dir;
	if( !dist%15 ) dir=0; 
	else if( dist>15 ) dist=15;
	else if( dist<0 ) dist=0;
	else if(dir==-1 )
		while(iB=B[--iterator]){
			if( _abs(iB.x-xPos) < ballsize && iB.y<yPos+y*(moving_distance+10) && iB.y>yPos+y*(85+moving_distance) ){
				if( iB!=1 ) score++;
				B[iterator]=1;
			}
		}
	iterator=0;
	
	return [x,y,xPos,yPos,dir,dist,score,color];
}



function distanceFromCenter( x , y , center ){
	x=_abs(x-center);
	y=_abs(y-center);
	return _sqrt( x*x + y*y );
}


function acceleration( dist ){
	
	if( dist > innerCircle ){
		return -.15*dist*.0075;
	} else {
		return .8*dist*.02;
	}
}


setInterval( drawCourt , 15 );


// end of submission //
		</script>
	</body>
</html>
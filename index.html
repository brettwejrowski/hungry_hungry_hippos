<!doctype html>
<html>
	<head>
		<title>JS1k, 1k demo submission [ID]</title>
		<meta charset="utf-8" />
	</head>
	<body>
		<canvas id="c"></canvas>
		<script>
			var b = document.body;
			var c = document.getElementsByTagName('canvas')[0];
			var a = c.getContext('2d');
			document.body.clientWidth; // fix bug in webkit: http://qfox.nl/weblog/218
		</script>
		<script>
// start of submission //
c.width=c.height=width=510;
a.font = "5ex y";
var ballsize = 20,
	outerCircle = 250,
	innerCircle=40,
	center = 255,
	court = 500,
	_thirty_=30,
	_fifty_=50,
	_seventy_=70,
	_fourhondo_=400,
	_eighty_=80,
	_hondo_=100,
	_ninety_=90,
	_sixty_=60,
	
	
	
	iterator =10,
	
	moving_distance,
	B = [],
	iB,
	white = "#fff",
	black = "#000",
	
	// hippo
	H = [ 0 // x
		, -1 // y
		, center-center*0 // xPos -- replace with x in iter
		, center-center*-1 // yPos -- replace with y in iter
		, 0 // dir
		, 0 // dist
		, 0 // score
		, "#02d"// color
	],
	
	_math = Math,
	_pi2 = _math.PI*2,
	_rand = _math.random,
	_sqrt = _math.sqrt,
	_abs = _math.abs,
	_fill = "fill",
	_Style = "Style",
	_stroke = "stroke",
	_Path = "Path",
	_fillStyle = _fill+_Style,
	_fillRect = _fill+"Rect",
	_strokeStyle = _stroke+_Style,
	_beginPath = "begin"+_Path,
	_arc = "arc",
	_closePath = "close"+_Path,
	
	b_dist,
	b_acc,
	
	
	onkeydown = onkeyup = function(i){
		i.which == 32 ? H[4]= ( i.type[5] ? 1:-1 )  :0; 
	};

	
	while(iterator--){
		B.push({
			  x:60+ _rand()*400
			, y:60+ _rand()*400
			, X:0
			, Y:0
		});
	}
	
	
	D = function(J,K,L,M,N,O,P){a[J](K,L,M,N,O,P);return D};
	
	

	
	


function drawCourt(){
	// background
	a[_fillStyle]="#f00";
	D( _fillRect , 0,0,width,width);

	// middle circle
	a[_strokeStyle]=black;
	D/*( _beginPath )
		( _arc,center,center,innerCircle,0,_pi2,true)
		( _closePath )
		( _stroke ) */

		//outer circle
		( _beginPath )
		( _arc , center ,center , outerCircle ,0,_pi2,true )
		( _closePath )
		( _stroke );
		
	// redraw balls
	while(iB=B[iterator++]){
		
		// if the ball is still active
		if(iB!=1){
			
			// move the ball
			b_dist = distanceFromCenter( iB.x , iB.y , center );
			b_acc = acceleration( b_dist );
			iB.x+=iB.X+= .5*b_acc*( iB.x>center ? 1 : -1);
			iB.y+=iB.Y+= .5*b_acc*( iB.y>center ? 1 : -1);

			// draw the ball
			a[_fillStyle] = white,
			D(_beginPath)
				( _arc , iB.x,iB.y,ballsize,0,_pi2,true)
				( _closePath )
				( _fill );	
		}
	}
	
	// draw the hippo
	H=drawHippo.apply(c,H);
	
	iterator=0;
	
}	

function drawHippo(x,y,xPos,yPos,dir,dist,score,color){
	// redraw the hippo!
	moving_distance = dist*8;

	a[_fillStyle]=color;
	//body
	D( _beginPath )
		( _arc , xPos , yPos+y*(75+moving_distance) , 35 ,0,_pi2,true)
		( _arc , xPos , yPos+y*(30+moving_distance) , 55 ,0,_pi2,true)
		( _closePath )
		( _fill );
	

	// score
	a.fillText( score , xPos-100, yPos-50 );
	a[_fillStyle]=color.replace("d","9");
	
	D( _fillRect , xPos-40,yPos+y*(20+moving_distance),20,10)
		( _fillRect , xPos+20,yPos+y*(20+moving_distance),20,10);
		
	// nose
	arc2(xPos,yPos,10,y*(91+moving_distance),5);
	arc2(xPos,yPos,22,y*(50+moving_distance) , 10);

		
	dist+=dir;
	if( dist == 15 || dist == 0){
		dir = 0;
	} 
	else if( dist > 15 ) dist = 15;
	else if( dist < 0 ) dist = 0;
	else if( dir==-1 ) {
		for(var j=0,jlen=B.length;j<jlen;j++){
			if( _abs(B[j].x-xPos) < 20 && 
				B[j].y<yPos+y*(moving_distance+10) && 
				B[j].y>yPos+y*(85+moving_distance) ){

				if( B[j]!=1 )
					score++;
				B[j]=1;
			}
		}
	}
	
	return [x,y,xPos,yPos,dir,dist,score,color];
}


function arc2( xPos , yPos , x , y , r ){
	D( _beginPath )
		( _arc , xPos-x ,yPos+y , r ,0,_pi2,true ) 
		( _arc , xPos+x ,yPos+y , r ,0,_pi2,true )
		( _closePath )
		( _fill );
}



function distanceFromCenter( x , y , center ){
	x=_abs(x-center);
	y=_abs(y-center);
	return _sqrt( x*x + y*y );
}


function acceleration( dist ){
	
	if( dist > innerCircle ){
		return -.15*dist*.0075;
	} else {
		return .8*dist*.02;
	}
}


setInterval( drawCourt , 15 );


// end of submission //
		</script>
	</body>
</html>
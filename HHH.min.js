for(c.width=c.height=W=510,a.font="3em m",z=j=20,f=255,n=k=v=u=i=I=S=0,T=10,l=[],o=[],p=Math,q=2*p.PI,r=p.random,s=p.sqrt,t=p.abs,P=p.pow,onkeyup=onkeydown=function(d){o[0][0]=d.type[5]?1:-1},A=function(d,b,g,e,M){with(a)e&&(fillStyle="#"+"0ff0f009000fff".substr(e-1,3)),M?fillText(d,b,g):(beginPath(),arc(d,b,g,q,0,0),fill());return A},Z=function(d,b,g,e,w){15<(b+=d)?b=15:0>b&&(b=0);k=8*b-f;b%15||(d=b&&j?-1:0);for(u=0,K=f+g*k,J=f+e*k;n=l[u++];)if(1^n){if(!j){v=40<s(P(n.x-f,2)+P(n.y-f,2))?-0.15:0.4;
n.x+=n.a+=v/2*(n.x>f?1:-1)-1.0E-4;n.y+=n.b+=v/2*(n.y>f?1:-1);A(n.x,n.y,z,12)}t(n.x-f-g*(k+55))<25&&40>t(n.y-f-e*(k+55))&&(~d?(n.a=g*3||n.a)&&(n.b=e*3||n.b):S++&&(1^n&&w++,l[u-1]=1))}A(K+g*65,J+e*65,50,j+1)(K+g*z,J+e*z,60)(w,K+g*40-T,J+e*40-T,9,1);return arguments};--j+1;)l.push({x:99+300*r(),y:99+300*r(),a:0,b:0})&&4>j&&o.push([0,0,j&&2-j,3-j&&1-j,0]);setInterval(function(){A(f,f,2*W,8)(f,f,250,5);for(j=0,I=0|r()*99;i=o[j];j++)o[j]=Z.apply(c,i);o[++I]&&S^z+1&&(o[I][0]=1)},15);
for(c.width=c.height=W=510,a.font="3em a",z=j=15,N=99,f=255,F=40,E=50,S=0,T=10,l=[],o=[],p=Math,q=2*p.PI,r=p.random,s=p.sqrt,t=p.abs,P=p.pow,onkeyup=onkeydown=function(d){o[0][0]=d.type[5]?1:-1},A=function(d,b,g,e,w){with(a)e+1&&(fillStyle="#"+"0ff0f009000fff".substr(e,3)),w?fillText(g,d,b):(beginPath(),arc(d,b,g,q,0,0),fill());return A},C=function(d,b,g,e,w){z<(b+=d)?b=z:0>b&&(b=0);b%z||(d=b&&j?-1:0);for(u=0,k=8*b-f,V=function(Z,M,U,G,D){A(f+g*(k+M)-(g||Z),f+e*(k+M)-(e||Z),U,G,D);return V};n=l[u++];)if(1^n)with(n)j||(v=F<s(P(x-f,2)+P(y-f,2))?-0.15:0.4,x+=X+=v/2*(x>f?1:-1)-1.0E-4,y+=Y+=v/2*(y>f?1:-1),A(x,y,z,11)),s(P(x-f-g*(k+E),2)+P(y-f-e*(k+E),2))<F-T&&(~d?(X=g*3*d||X)&&(Y=e*3*d||Y):S++&&(1^n&&w++,l[u-1]=1));A(T+j*E,E,w,j,1);V(0,E,F+b/3)(0,z,E)(z,F,T+b/3,11)(-z,F,T+b/3)(z,44,5,8)(-z,44,5);return arguments};--j+1;)l.push({x:N+f*r(),y:N+f*r(),X:0,Y:0})&&4>j&&o.push([0,0,j&&2-j,3-j&&1-j,0]);setInterval(function(){A(f,f,W,7)(f,f,f,4);for(j=0,I=0|r()*N;i=o[j];j++)o[j]=C.apply(c,i);o[++I]&&S<=z&&(o[I][0]=1)},z);